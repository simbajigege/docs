"use strict";(self.webpackChunkdyte_docs=self.webpackChunkdyte_docs||[]).push([[34347],{81032:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var s=n(74848),r=n(28453);const a={title:"Sharing screen on iOS",sidebar_position:12,tags:["flutter-core"]},i=void 0,o={id:"local-user/screen-share-iOS-guide",title:"Sharing screen on iOS",description:"This document explains how to setup screen sharing on a Flutter iOS App using Dyte SDK",source:"@site/docs/flutter-core/local-user/screen-share-iOS-guide.mdx",sourceDirName:"local-user",slug:"/local-user/screen-share-iOS-guide",permalink:"/docs/flutter-core/local-user/screen-share-iOS-guide",draft:!1,unlisted:!1,editUrl:"https://github.com/dyte-io/docs/tree/main/docs/flutter-core/local-user/screen-share-iOS-guide.mdx",tags:[{label:"flutter-core",permalink:"/docs/flutter-core/tags/flutter-core"}],version:"current",lastUpdatedAt:1706782034,formattedLastUpdatedAt:"Feb 1, 2024",sidebarPosition:12,frontMatter:{title:"Sharing screen on iOS",sidebar_position:12,tags:["flutter-core"]},sidebar:"tutorialSidebar",previous:{title:"Manage Media Devices",permalink:"/docs/flutter-core/local-user/manage-media-devices"},next:{title:"Room Metadata",permalink:"/docs/flutter-core/room-metadata"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"Add a new Broadcast Upload Extension to your project.",id:"add-a-new-broadcast-upload-extension-to-your-project",level:3},{value:"Setup app groups",id:"setup-app-groups",level:3},{value:"Setup SampleHandler",id:"setup-samplehandler",level:3},{value:"Modify Info.plist",id:"modify-infoplist",level:3},{value:"Start the Screenshare",id:"start-the-screenshare",level:3}];function l(e){const t={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Head:a}=t;return a||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"This document explains how to setup screen sharing on a Flutter iOS App using Dyte SDK"}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Add a new Broadcast Upload Extension to your project."}),"\n",(0,s.jsx)(t.li,{children:"Setup app groups"}),"\n",(0,s.jsx)(t.li,{children:"Have your SampleHandler class initialize DyteBroadcastHandler and proxy a few methods."}),"\n",(0,s.jsx)(t.li,{children:"Update Info.plist"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"add-a-new-broadcast-upload-extension-to-your-project",children:"Add a new Broadcast Upload Extension to your project."}),"\n",(0,s.jsxs)(t.p,{children:["Add a Broadcast Upload Extension through ",(0,s.jsx)(t.code,{children:"File"})," -> ",(0,s.jsx)(t.code,{children:"New"})," -> ",(0,s.jsx)(t.code,{children:"Target"}),".\nChoose ",(0,s.jsx)(t.code,{children:"iOS"})," -> ",(0,s.jsx)(t.code,{children:"Broadcast Upload Extension"})," and fill out the required information for your extension and click ",(0,s.jsx)(t.code,{children:"Finish"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{alt:"meeting UI screenshot with labeled parts",src:n(38498).A+"",width:"1474",height:"1052"}),"\n",(0,s.jsx)(t.img,{alt:"meeting UI screenshot with labeled parts",src:n(62241).A+"",width:"1474",height:"1052"})]}),"\n",(0,s.jsx)(t.h3,{id:"setup-app-groups",children:"Setup app groups"}),"\n",(0,s.jsx)(t.p,{children:"Add your extension to an app group by going to your extension's target in the project; in the Signings & Capabilities tab, click the + button in the top left and add App Groups. If you haven't done so already, add App Groups to your main app as well, ensuring that the App Group identifier is the same for both."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{alt:"meeting UI screenshot with labeled parts",src:n(68467).A+"",width:"1480",height:"1050"}),"\n",(0,s.jsx)(t.img,{alt:"meeting UI screenshot with labeled parts",src:n(29003).A+"",width:"1480",height:"1050"})]}),"\n",(0,s.jsx)(t.h3,{id:"setup-samplehandler",children:"Setup SampleHandler"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Edit your SampleHandler class to look something like this."}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-swift",children:"\n\nimport ReplayKit\nimport DyteiOSCore\n\nclass SampleHandler: RPBroadcastSampleHandler {\n\n    let dyteBroadcast: DyteBroadcastHandler  = DyteBroadcastHandler();\n\n    override init() {\n        super.init()\n    }\n    override func broadcastPaused() {\n        dyteBroadcast.broadcastPaused()\n    }\n\n    override func broadcastResumed() {\n        dyteBroadcast.broadcastResumed()\n    }\n\n    override func broadcastFinished() {\n        dyteBroadcast.broadcastFinished()\n    }\n\n    override func broadcastStarted(withSetupInfo setupInfo: [String : NSObject]?) {\n        dyteBroadcast.broadcastStartedWithSetupInfo(setupInfo: setupInfo)\n    }\n\n    override func processSampleBuffer(_ sampleBuffer: CMSampleBuffer, with sampleBufferType: RPSampleBufferType) {\n        let rawPointer = Unmanaged.passUnretained(sampleBuffer).toOpaque()\n        dyteBroadcast.processSampleBuffer(sampleBuffer: rawPointer, withType: Int64(sampleBufferType.rawValue))\n\n    }\n\n}\n\n"})}),"\n",(0,s.jsx)(t.h3,{id:"modify-infoplist",children:"Modify Info.plist"}),"\n",(0,s.jsxs)(t.p,{children:["Make sure ",(0,s.jsx)(t.strong,{children:"both of them"})," (App and Extension Info.plist) contains these keys"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"  <key>RTCAppGroupIdentifier</key>\n\t<string>(name of the group)</string>\n\t<key>RTCScreenSharingExtension</key>\n\t<string>(Bundle Identifier)</string>\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Info.plist screenshot",src:n(80320).A+"",width:"1480",height:"582"})}),"\n",(0,s.jsx)(t.h3,{id:"start-the-screenshare",children:"Start the Screenshare"}),"\n",(0,s.jsxs)(t.p,{children:["Call the method ",(0,s.jsx)(t.code,{children:"enableScreenshare()"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"dyteClient.localUser.enableScreenshare()\n"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{alt:"screenshot",src:n(38939).A+"",width:"590",height:"1280"}),"\n",(0,s.jsx)(t.img,{alt:"screenshot",src:n(89309).A+"",width:"3418",height:"1804"})]}),"\n",(0,s.jsx)(a,{children:(0,s.jsx)("title",{children:"Flutter Core Sharing screen on iOS"})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},38498:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-0-a201a4ac7eaace77756cc6e89ba578c7.png"},62241:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-01-938876034f3e175b56c37e767fda4750.png"},68467:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-03-b0569240a9c0a32a0d453535c193cd17.png"},29003:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-1-4ed0ad6d5ff14cfcf9c1fd7fd93979a4.png"},38939:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-app-267a40a208c4fd0ca2cdd9f65f241788.png"},89309:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-demo-8bca0fa4bcf0188616c9dd85d5c8c2e6.png"},80320:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-setup-info-7b16513e58883d5a1f6a5139dd977839.png"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(96540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);